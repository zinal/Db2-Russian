# Федеративный доступ к источникам данных Hive в среде IBM Db2

Состав доступных материалов:
* инструкция по подключению;
* пример скрипта для автоматического обновления параметров подключения из ZooKeeper.

Скрипт написан на языке Groovy (см. файл `RefreshHiveZookeeper.groovy`), и использует для своей работы Java-библиотеки ZooKeeper и JDBC-драйвер Db2.
Скачивание зависимостей автоматизировано (см. скрипт `download-dependencies.sh`).
Запуск основного скрипта на языке Groovy вместе со скачиванием зависимостей (при их отсутствии) обеспечивается скриптом `refresh-hive-zookeeper.sh`.

Работа данного примера проверялась в ОС MacOS и Linux, с использованием Kerberos-аутентификации при подключении к ZooKeeper.
Использование других режимов аутентификации при работе ZooKeeper и Db2 потребует корректировки параметров выполнения скрипта.

Настройки работы устанавливаются в файле `RefreshHiveZookeeper.xml` в виде свойств Java формата XML.
Свойства, имена которых начинаются с символов `SYS.`, автоматически устанавливаются в виде системных свойств Java перед началом работы.

Если подобный скрипт поставить на регулярное выполнение, то при переключении на стороне кластера Hadoop серверов Hive будет происходить автоматическое (с некоей задержкой) переключение на новый сервер подключений со стороны Db2.
 
При своей работе скрипт также печатает текущие параметры подключения, определённые в ZooKeeper, что можно использовать при первоначальной настройке подключений на стороне Db2.
